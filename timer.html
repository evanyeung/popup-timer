<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="timer80s.css">
    </head>
    <body>
        <div>
            <p>A popup will alert you every set number of minutes</p>
            <input type="text" id="interval">
            <button type="button" id="toggle-timer" class="stopped"><strong>Stopped</strong></button>
        </div>
        
        <script>
            function hasClass(elem, className)
            {
                return new RegExp(" " + className + " ").test(" " + elem.className + " ");
            }
            
            function addClass(elem, className)
            {
                if(!hasClass(elem, className))
                {
                    elem.className += " " + className;
                }
            }
            
            function removeClass(elem, className)
            {
                if(hasClass(elem, className))
                {
                    elem.className = elem.className.replace(className, "");
                }
            }
            
            function getInterval(inputElem)
            {
                var interval = inputElem.value;
                if (!interval.match(/^\d+$/ig))
                {
                    alert("Did not enter an integer. Set to 1 min");
                    interval = 1;
                }
                return parseInt(interval)*1000*60; //in minutes
            }
        
            var toggle = document.getElementById("toggle-timer");
            var input = document.getElementById("interval");
            var intervalID = null;
            
            toggle.onclick = function () {
                if (hasClass(toggle, "stopped"))
                {
                    removeClass(toggle, "stopped");
                    addClass(toggle, "running");
                    toggle.innerHTML = "<strong>Running</strong>";
                    toggle.blur(); //for some reason js leaves it focused after changing class
                    
                    var interval = getInterval(input);
                    
                    //set interval to alert in minutes
                    //assigns the id of the interval process
                    intervalID = window.setInterval(function() {
                        alert("time");
                    }, interval);
                    input.disabled = true; //cannot change interval when running
                }
                else
                {
                    removeClass(toggle, "running");
                    addClass(toggle, "stopped");
                    clearInterval(intervalID); //stop repetition
                    toggle.innerHTML = "<strong>Stopped</strong>";
                    toggle.blur();
                    input.disabled = false; //re-enable field
                }
            };
        </script>
    </body>
</html>